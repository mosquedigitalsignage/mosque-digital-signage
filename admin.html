<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mosque Digital Signage - Admin</title>
  <link rel="stylesheet" href="./src/admin.css" />

  <!-- Firebase SDK (compat CDN) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <div class="admin-container">
    <!-- Sign-in screen -->
    <div id="sign-in-screen" class="screen">
      <h1>Mosque Digital Signage</h1>
      <p>Admin Dashboard</p>
      <button id="google-sign-in-btn" class="btn btn-primary">Sign in with Google</button>
    </div>

    <!-- Loading screen -->
    <div id="loading-screen" class="screen" style="display:none;">
      <p>Loading...</p>
    </div>

    <!-- New mosque form -->
    <div id="new-mosque-screen" class="screen" style="display:none;">
      <div class="form-container">
        <h1>Create Your Mosque</h1>
        <p class="subtitle">Set up your mosque's digital signage display</p>

        <form id="new-mosque-form">
          <fieldset>
            <legend>Mosque Information</legend>
            <label>
              Mosque Name *
              <input type="text" id="nm-name" required placeholder="e.g., Muslim Association of Greater Pittsburgh" />
            </label>
            <label>
              Short Name
              <input type="text" id="nm-short-name" placeholder="e.g., MAP" />
            </label>
            <label>
              Header Text
              <input type="text" id="nm-header" placeholder="e.g., Welcome to Muslim Association of Greater Pittsburgh" />
            </label>
            <label>
              Page Title
              <input type="text" id="nm-page-title" placeholder="e.g., MAP Digital Display" />
            </label>
          </fieldset>

          <fieldset>
            <legend>Location</legend>
            <label>
              Zipcode *
              <input type="text" id="nm-zipcode" required placeholder="e.g., 15044" />
            </label>
            <label>
              Country
              <select id="nm-country">
                <option value="US" selected>United States</option>
                <option value="CA">Canada</option>
                <option value="GB">United Kingdom</option>
                <option value="AU">Australia</option>
                <option value="DE">Germany</option>
                <option value="FR">France</option>
                <option value="SA">Saudi Arabia</option>
                <option value="AE">United Arab Emirates</option>
                <option value="QA">Qatar</option>
                <option value="KW">Kuwait</option>
                <option value="BH">Bahrain</option>
                <option value="OM">Oman</option>
                <option value="PK">Pakistan</option>
                <option value="IN">India</option>
                <option value="BD">Bangladesh</option>
                <option value="MY">Malaysia</option>
                <option value="ID">Indonesia</option>
                <option value="TR">Turkey</option>
                <option value="EG">Egypt</option>
                <option value="NG">Nigeria</option>
                <option value="ZA">South Africa</option>
                <option value="KE">Kenya</option>
              </select>
            </label>
            <label>
              Timezone
              <select id="nm-timezone">
                <optgroup label="Americas">
                  <option value="America/New_York" selected>Eastern (New York)</option>
                  <option value="America/Chicago">Central (Chicago)</option>
                  <option value="America/Denver">Mountain (Denver)</option>
                  <option value="America/Los_Angeles">Pacific (Los Angeles)</option>
                  <option value="America/Anchorage">Alaska</option>
                  <option value="Pacific/Honolulu">Hawaii</option>
                  <option value="America/Toronto">Toronto</option>
                  <option value="America/Vancouver">Vancouver</option>
                  <option value="America/Edmonton">Edmonton</option>
                  <option value="America/Winnipeg">Winnipeg</option>
                  <option value="America/Halifax">Halifax</option>
                </optgroup>
                <optgroup label="Europe">
                  <option value="Europe/London">London</option>
                  <option value="Europe/Berlin">Berlin</option>
                  <option value="Europe/Paris">Paris</option>
                  <option value="Europe/Istanbul">Istanbul</option>
                  <option value="Europe/Moscow">Moscow</option>
                </optgroup>
                <optgroup label="Middle East">
                  <option value="Asia/Riyadh">Riyadh</option>
                  <option value="Asia/Dubai">Dubai</option>
                  <option value="Asia/Qatar">Qatar</option>
                  <option value="Asia/Kuwait">Kuwait</option>
                  <option value="Asia/Bahrain">Bahrain</option>
                  <option value="Asia/Muscat">Muscat</option>
                </optgroup>
                <optgroup label="South Asia">
                  <option value="Asia/Karachi">Karachi</option>
                  <option value="Asia/Kolkata">Kolkata</option>
                  <option value="Asia/Dhaka">Dhaka</option>
                </optgroup>
                <optgroup label="Southeast Asia / East Asia">
                  <option value="Asia/Kuala_Lumpur">Kuala Lumpur</option>
                  <option value="Asia/Jakarta">Jakarta</option>
                  <option value="Asia/Singapore">Singapore</option>
                </optgroup>
                <optgroup label="Africa">
                  <option value="Africa/Cairo">Cairo</option>
                  <option value="Africa/Lagos">Lagos</option>
                  <option value="Africa/Johannesburg">Johannesburg</option>
                  <option value="Africa/Nairobi">Nairobi</option>
                </optgroup>
                <optgroup label="Oceania">
                  <option value="Australia/Sydney">Sydney</option>
                  <option value="Australia/Melbourne">Melbourne</option>
                  <option value="Australia/Perth">Perth</option>
                </optgroup>
              </select>
            </label>
          </fieldset>

          <fieldset>
            <legend>Prayer Times</legend>
            <label>
              Calculation Method
              <select id="nm-calc-method">
                <option value="ISNA" selected>ISNA</option>
                <option value="MWL">Muslim World League</option>
                <option value="Umm Al-Qura">Umm Al-Qura</option>
                <option value="Egyptian">Egyptian</option>
                <option value="Karachi">Karachi</option>
                <option value="Tehran">Tehran</option>
                <option value="Shia Ithna-Ashari">Shia Ithna-Ashari</option>
              </select>
            </label>
            <label>
              Jummah Time
              <input type="text" id="nm-jummah" placeholder="e.g., 1:15 PM" />
            </label>
          </fieldset>

          <fieldset>
            <legend>Google Drive</legend>
            <div class="info-box">
              <strong>Setup instructions:</strong>
              <ol>
                <li>Create a Google Drive folder (e.g., "Mosque Display")</li>
                <li>Inside it, create subfolders: <code>slideshow/</code> and <code>qr-codes/</code></li>
                <li>Optionally add a <code>background.jpg</code> file at the root</li>
                <li>Set sharing to "Anyone with the link" (Viewer)</li>
                <li>Copy the folder ID from the URL (the long string after /folders/)</li>
              </ol>
            </div>
            <label>
              Root Folder ID
              <input type="text" id="nm-drive-folder" placeholder="e.g., 1A2B3C4D5E6F7G8H9I0J" />
            </label>
          </fieldset>

          <fieldset>
            <legend>Display Theme</legend>
            <div class="color-row">
              <label>
                Accent Color
                <input type="color" id="nm-accent" value="#ffd700" />
              </label>
              <label>
                Text Color
                <input type="color" id="nm-text-color" value="#ffffff" />
              </label>
            </div>
          </fieldset>

          <button type="submit" class="btn btn-primary">Create Mosque</button>
        </form>
      </div>
    </div>

    <!-- Dashboard (existing mosque) -->
    <div id="dashboard-screen" class="screen" style="display:none;">
      <div class="dashboard-container">
        <div class="dashboard-header">
          <h1 id="dash-mosque-name">Mosque Dashboard</h1>
          <div class="dashboard-actions">
            <button id="preview-btn" class="btn btn-secondary">Preview Display</button>
            <button id="sign-out-btn" class="btn btn-outline">Sign Out</button>
          </div>
        </div>

        <div class="url-box">
          <label>Display URL</label>
          <div class="url-row">
            <input type="text" id="dash-display-url" readonly />
            <button id="copy-url-btn" class="btn btn-secondary">Copy</button>
          </div>
        </div>

        <form id="edit-mosque-form">
          <fieldset>
            <legend>Mosque Information</legend>
            <label>
              Mosque Name
              <input type="text" id="ed-name" />
            </label>
            <label>
              Short Name
              <input type="text" id="ed-short-name" />
            </label>
            <label>
              Header Text
              <input type="text" id="ed-header" />
            </label>
            <label>
              Page Title
              <input type="text" id="ed-page-title" />
            </label>
          </fieldset>

          <fieldset>
            <legend>Location</legend>
            <label>
              Zipcode
              <input type="text" id="ed-zipcode" />
            </label>
            <label>
              Country
              <select id="ed-country">
                <option value="US">United States</option>
                <option value="CA">Canada</option>
                <option value="GB">United Kingdom</option>
                <option value="AU">Australia</option>
                <option value="DE">Germany</option>
                <option value="FR">France</option>
                <option value="SA">Saudi Arabia</option>
                <option value="AE">United Arab Emirates</option>
                <option value="QA">Qatar</option>
                <option value="KW">Kuwait</option>
                <option value="BH">Bahrain</option>
                <option value="OM">Oman</option>
                <option value="PK">Pakistan</option>
                <option value="IN">India</option>
                <option value="BD">Bangladesh</option>
                <option value="MY">Malaysia</option>
                <option value="ID">Indonesia</option>
                <option value="TR">Turkey</option>
                <option value="EG">Egypt</option>
                <option value="NG">Nigeria</option>
                <option value="ZA">South Africa</option>
                <option value="KE">Kenya</option>
              </select>
            </label>
            <label>
              Timezone
              <select id="ed-timezone">
                <optgroup label="Americas">
                  <option value="America/New_York">Eastern (New York)</option>
                  <option value="America/Chicago">Central (Chicago)</option>
                  <option value="America/Denver">Mountain (Denver)</option>
                  <option value="America/Los_Angeles">Pacific (Los Angeles)</option>
                  <option value="America/Anchorage">Alaska</option>
                  <option value="Pacific/Honolulu">Hawaii</option>
                  <option value="America/Toronto">Toronto</option>
                  <option value="America/Vancouver">Vancouver</option>
                  <option value="America/Edmonton">Edmonton</option>
                  <option value="America/Winnipeg">Winnipeg</option>
                  <option value="America/Halifax">Halifax</option>
                </optgroup>
                <optgroup label="Europe">
                  <option value="Europe/London">London</option>
                  <option value="Europe/Berlin">Berlin</option>
                  <option value="Europe/Paris">Paris</option>
                  <option value="Europe/Istanbul">Istanbul</option>
                  <option value="Europe/Moscow">Moscow</option>
                </optgroup>
                <optgroup label="Middle East">
                  <option value="Asia/Riyadh">Riyadh</option>
                  <option value="Asia/Dubai">Dubai</option>
                  <option value="Asia/Qatar">Qatar</option>
                  <option value="Asia/Kuwait">Kuwait</option>
                  <option value="Asia/Bahrain">Bahrain</option>
                  <option value="Asia/Muscat">Muscat</option>
                </optgroup>
                <optgroup label="South Asia">
                  <option value="Asia/Karachi">Karachi</option>
                  <option value="Asia/Kolkata">Kolkata</option>
                  <option value="Asia/Dhaka">Dhaka</option>
                </optgroup>
                <optgroup label="Southeast Asia / East Asia">
                  <option value="Asia/Kuala_Lumpur">Kuala Lumpur</option>
                  <option value="Asia/Jakarta">Jakarta</option>
                  <option value="Asia/Singapore">Singapore</option>
                </optgroup>
                <optgroup label="Africa">
                  <option value="Africa/Cairo">Cairo</option>
                  <option value="Africa/Lagos">Lagos</option>
                  <option value="Africa/Johannesburg">Johannesburg</option>
                  <option value="Africa/Nairobi">Nairobi</option>
                </optgroup>
                <optgroup label="Oceania">
                  <option value="Australia/Sydney">Sydney</option>
                  <option value="Australia/Melbourne">Melbourne</option>
                  <option value="Australia/Perth">Perth</option>
                </optgroup>
              </select>
            </label>
          </fieldset>

          <fieldset>
            <legend>Prayer Times</legend>
            <label>
              Calculation Method
              <select id="ed-calc-method">
                <option value="ISNA">ISNA</option>
                <option value="MWL">Muslim World League</option>
                <option value="Umm Al-Qura">Umm Al-Qura</option>
                <option value="Egyptian">Egyptian</option>
                <option value="Karachi">Karachi</option>
                <option value="Tehran">Tehran</option>
                <option value="Shia Ithna-Ashari">Shia Ithna-Ashari</option>
              </select>
            </label>
            <label>
              Jummah Time
              <input type="text" id="ed-jummah" />
            </label>
          </fieldset>

          <fieldset>
            <legend>Google Drive</legend>
            <div class="info-box">
              <strong>Folder structure:</strong>
              <code>slideshow/</code> for announcement images,
              <code>qr-codes/</code> for QR codes (filename = label, max 4),
              <code>background.*</code> for background image.
              Set sharing to "Anyone with the link" (Viewer).
            </div>
            <label>
              Root Folder ID
              <input type="text" id="ed-drive-folder" />
            </label>
          </fieldset>

          <fieldset>
            <legend>Display Settings</legend>
            <label>
              Slideshow Interval (ms)
              <input type="number" id="ed-slideshow-interval" min="1000" step="1000" />
            </label>
            <label>
              Ayat Rotation Interval (ms)
              <input type="number" id="ed-ayat-interval" min="5000" step="1000" />
            </label>
            <div class="color-row">
              <label>
                Accent Color
                <input type="color" id="ed-accent" />
              </label>
              <label>
                Text Color
                <input type="color" id="ed-text-color" />
              </label>
            </div>
          </fieldset>

          <button type="submit" class="btn btn-primary">Save Changes</button>
          <div id="save-status" class="save-status"></div>
        </form>
      </div>
    </div>
  </div>

  <script type="module" src="./src/admin.js"></script>
</body>
</html>
